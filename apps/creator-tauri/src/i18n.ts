export type Locale = 'pt-BR' | 'en-US'

const messages: Record<Locale, Record<string, string>> = {
  'pt-BR': {
    appName: 'Game Orchestrator Creator',
    title: 'Fluxo inicial para gerar e testar o Orquestrador',
    subtitle: 'Interface em evolução por fases, com foco em rastreabilidade e diagnóstico.',
    language: 'Idioma',
    statusReady: 'Pronto.',
    tabGame: 'Jogo',
    tabRuntime: 'Runtime',
    tabReview: 'Revisão e Geração',
    gameName: 'Nome do jogo',
    gameNameHelp: 'Nome exibido na splash e nos logs.',
    exePath: 'Executável (.exe)',
    exePathHelp: 'Caminho do executável usado para hash e validações.',
    gameRoot: 'Pasta raiz do jogo',
    gameRootHelp: 'Usada no teste para validar arquivos obrigatórios.',
    relativeExePath: 'Caminho relativo do executável na configuração',
    relativeExePathHelp: 'Sempre relativo; ex.: ./game.exe',
    exeHash: 'Hash SHA-256',
    exeHashHelp: 'Identificador do perfil e do prefixo.',
    hashButton: 'Calcular Hash',
    launchArgs: 'Argumentos de inicialização (separados por espaço)',
    launchArgsHelp: 'Ex.: -windowed -nointro',
    integrityFiles: 'Arquivos obrigatórios (1 por linha)',
    integrityFilesHelp: 'Cada linha vira um arquivo obrigatório para validação.',
    applyLists: 'Aplicar Listas',
    protonVersion: 'Versão do Proton',
    protonVersionHelp: 'Usado quando o runtime selecionado for Proton.',
    runtimePrimary: 'Runtime primário',
    runtimePrimaryHelp: 'Candidato inicial: ProtonUmu, ProtonNative ou Wine.',
    strictRuntime: 'Runtime estrito (sem fallback)',
    strictRuntimeHelp: 'Se ativado, tenta apenas o runtime primário.',
    restoreRuntimeDefaults: 'Restaurar defaults de runtime',
    orchestratorBase: 'Orquestrador base',
    orchestratorBaseHelp: 'Binário base pré-compilado usado para injetar a configuração embutida.',
    outputExecutable: 'Saída do executável',
    outputExecutableHelp: 'Caminho final do orquestrador gerado.',
    testButton: 'Testar',
    createButton: 'Criar Executável',
    payloadPreview: 'Pré-visualização da configuração (JSON)',
    resultTitle: 'Resultado da última ação',
    noResult: 'Sem resultado ainda.',
    msgHashStart: 'Calculando hash do executável...',
    msgHashOk: 'Hash calculado com sucesso.',
    msgHashFail: 'Falha ao calcular hash:',
    msgTestStart: 'Testando configuração (doctor + plano de prefixo)...',
    msgTestOk: 'Teste concluído.',
    msgTestFail: 'Falha no teste:',
    msgCreateStart: 'Gerando orquestrador...',
    msgCreateOk: 'Executável gerado com sucesso.',
    msgCreateFail: 'Falha ao gerar executável:',
    msgListsApplied: 'Listas aplicadas à configuração'
  },
  'en-US': {
    appName: 'Game Orchestrator Creator',
    title: 'Minimal flow to test and build the Orchestrator',
    subtitle: 'Initial UI that will evolve by phases, focused on debugging and traceability.',
    language: 'Language',
    statusReady: 'Ready.',
    tabGame: 'Game',
    tabRuntime: 'Runtime',
    tabReview: 'Review and Generate',
    gameName: 'Game name',
    gameNameHelp: 'Displayed in splash and logs.',
    exePath: 'Executable (.exe)',
    exePathHelp: 'EXE path used for hashing and integrity checks.',
    gameRoot: 'Game root folder',
    gameRootHelp: 'Used by Test to validate required files.',
    relativeExePath: 'Relative executable path in configuration',
    relativeExePathHelp: 'Always relative; ex.: ./game.exe',
    exeHash: 'SHA-256 hash',
    exeHashHelp: 'Profile and prefix identifier.',
    hashButton: 'Calculate Hash',
    launchArgs: 'Launch arguments (space separated)',
    launchArgsHelp: 'Ex.: -windowed -nointro',
    integrityFiles: 'Required files (1 per line)',
    integrityFilesHelp: 'Each line becomes one required file entry.',
    applyLists: 'Apply Lists',
    protonVersion: 'Proton version',
    protonVersionHelp: 'Used when selected runtime is Proton.',
    runtimePrimary: 'Primary runtime',
    runtimePrimaryHelp: 'Initial candidate: ProtonUmu, ProtonNative or Wine.',
    strictRuntime: 'Strict runtime (no fallback)',
    strictRuntimeHelp: 'When enabled, only the primary runtime is tried.',
    restoreRuntimeDefaults: 'Restore runtime defaults',
    orchestratorBase: 'Orchestrator base',
    orchestratorBaseHelp: 'Prebuilt base binary used to inject embedded configuration.',
    outputExecutable: 'Output executable',
    outputExecutableHelp: 'Final generated orchestrator path.',
    testButton: 'Test',
    createButton: 'Create Executable',
    payloadPreview: 'Configuration preview (JSON)',
    resultTitle: 'Last action result',
    noResult: 'No result yet.',
    msgHashStart: 'Calculating executable hash...',
    msgHashOk: 'Hash calculated successfully.',
    msgHashFail: 'Failed to calculate hash:',
    msgTestStart: 'Testing configuration (doctor + prefix plan)...',
    msgTestOk: 'Test completed.',
    msgTestFail: 'Test failed:',
    msgCreateStart: 'Generating orchestrator...',
    msgCreateOk: 'Executable created successfully.',
    msgCreateFail: 'Failed to create executable:',
    msgListsApplied: 'Lists applied to configuration'
  }
}

export function detectLocale(): Locale {
  const saved = localStorage.getItem('creator.locale')
  if (saved === 'pt-BR' || saved === 'en-US') return saved
  return navigator.language.startsWith('pt') ? 'pt-BR' : 'en-US'
}

export function translate(locale: Locale, key: string): string {
  return messages[locale][key] ?? key
}
