export type Locale = 'pt-BR' | 'en-US'

const messages: Record<Locale, Record<string, string>> = {
  'pt-BR': {
    appName: 'Game Orchestrator Creator',
    title: 'Fluxo mínimo para gerar e testar o Orquestrador',
    subtitle: 'UI inicial para evoluir por fases, com foco em debug e rastreabilidade.',
    language: 'Idioma',
    statusReady: 'Pronto',
    tabGame: 'Jogo',
    tabRuntime: 'Runtime',
    tabReview: 'Revisao e Gerar',
    gameName: 'Nome do jogo',
    gameNameHelp: 'Nome exibido na splash e nos logs.',
    exePath: 'Executavel (.exe)',
    exePathHelp: 'Caminho do exe para hash e referencia de integridade.',
    gameRoot: 'Pasta raiz do jogo',
    gameRootHelp: 'Usada no comando Testar para validar arquivos obrigatorios.',
    relativeExePath: 'Path relativo do exe no payload',
    relativeExePathHelp: 'Sempre relativo; ex.: ./game.exe',
    exeHash: 'Hash SHA-256',
    exeHashHelp: 'Identificador do perfil e do prefixo.',
    hashButton: 'Calcular Hash',
    launchArgs: 'Launch args (separados por espaço)',
    launchArgsHelp: 'Ex.: -windowed -nointro',
    integrityFiles: 'Arquivos obrigatórios (1 por linha)',
    integrityFilesHelp: 'Cada linha vira um item em integrity_files.',
    applyLists: 'Aplicar Listas',
    protonVersion: 'Versão do Proton',
    protonVersionHelp: 'Usado quando runtime selecionado for Proton.',
    runtimePrimary: 'Runtime primário',
    runtimePrimaryHelp: 'Candidato inicial: ProtonUmu, ProtonNative ou Wine.',
    strictRuntime: 'Runtime estrito (sem fallback)',
    strictRuntimeHelp: 'Se ativo, só tenta o runtime primário.',
    restoreRuntimeDefaults: 'Restaurar defaults de runtime',
    orchestratorBase: 'Orchestrator base',
    orchestratorBaseHelp: 'Binário base pré-compilado usado para injetar o payload.',
    outputExecutable: 'Saída do executável',
    outputExecutableHelp: 'Caminho final do orquestrador gerado.',
    testButton: 'Testar',
    createButton: 'Criar Executável',
    payloadPreview: 'Preview do Payload JSON',
    resultTitle: 'Resultado',
    noResult: 'Sem resultado ainda.',
    msgHashStart: 'Calculando hash do executavel...',
    msgHashOk: 'Hash calculado com sucesso',
    msgHashFail: 'Falha ao calcular hash:',
    msgTestStart: 'Testando configuracao (doctor + prefix plan)...',
    msgTestOk: 'Teste concluido',
    msgTestFail: 'Falha no teste:',
    msgCreateStart: 'Gerando orquestrador...',
    msgCreateOk: 'Executavel gerado com sucesso',
    msgCreateFail: 'Falha ao gerar executavel:',
    msgListsApplied: 'Listas aplicadas no payload'
  },
  'en-US': {
    appName: 'Game Orchestrator Creator',
    title: 'Minimal flow to test and build the Orchestrator',
    subtitle: 'Initial UI that will evolve by phases, focused on debugging and traceability.',
    language: 'Language',
    statusReady: 'Ready',
    tabGame: 'Game',
    tabRuntime: 'Runtime',
    tabReview: 'Review and Generate',
    gameName: 'Game name',
    gameNameHelp: 'Displayed in splash and logs.',
    exePath: 'Executable (.exe)',
    exePathHelp: 'EXE path used for hashing and integrity checks.',
    gameRoot: 'Game root folder',
    gameRootHelp: 'Used by Test to validate required files.',
    relativeExePath: 'Relative EXE path in payload',
    relativeExePathHelp: 'Always relative; ex.: ./game.exe',
    exeHash: 'SHA-256 hash',
    exeHashHelp: 'Profile and prefix identifier.',
    hashButton: 'Calculate Hash',
    launchArgs: 'Launch args (space separated)',
    launchArgsHelp: 'Ex.: -windowed -nointro',
    integrityFiles: 'Required files (1 per line)',
    integrityFilesHelp: 'Each line becomes one integrity_files item.',
    applyLists: 'Apply Lists',
    protonVersion: 'Proton version',
    protonVersionHelp: 'Used when selected runtime is Proton.',
    runtimePrimary: 'Primary runtime',
    runtimePrimaryHelp: 'Initial candidate: ProtonUmu, ProtonNative or Wine.',
    strictRuntime: 'Strict runtime (no fallback)',
    strictRuntimeHelp: 'When enabled, only the primary runtime is tried.',
    restoreRuntimeDefaults: 'Restore runtime defaults',
    orchestratorBase: 'Orchestrator base',
    orchestratorBaseHelp: 'Prebuilt base binary used to inject payload.',
    outputExecutable: 'Output executable',
    outputExecutableHelp: 'Final generated orchestrator path.',
    testButton: 'Test',
    createButton: 'Create Executable',
    payloadPreview: 'Payload JSON Preview',
    resultTitle: 'Result',
    noResult: 'No result yet.',
    msgHashStart: 'Calculating executable hash...',
    msgHashOk: 'Hash calculated successfully',
    msgHashFail: 'Failed to calculate hash:',
    msgTestStart: 'Testing configuration (doctor + prefix plan)...',
    msgTestOk: 'Test completed',
    msgTestFail: 'Test failed:',
    msgCreateStart: 'Generating orchestrator...',
    msgCreateOk: 'Executable created successfully',
    msgCreateFail: 'Failed to create executable:',
    msgListsApplied: 'Lists applied to payload'
  }
}

export function detectLocale(): Locale {
  const saved = localStorage.getItem('creator.locale')
  if (saved === 'pt-BR' || saved === 'en-US') return saved
  return navigator.language.startsWith('pt') ? 'pt-BR' : 'en-US'
}

export function translate(locale: Locale, key: string): string {
  return messages[locale][key] ?? key
}
